<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Data Editor - Adventure Game</title>
    <link rel="stylesheet" href="css/editor.css">
</head>
<body>
    <div class="editor-container">
        <!-- Header -->
        <header class="editor-header">
            <div class="header-left">
                <h1>üéÆ Game Data Editor</h1>
                <span class="version">v2.0.0</span>
                <div class="current-project">
                    <span class="current-project-label">Project:</span>
                    <span id="current-project-name" class="current-project-name">Untitled Project</span>
                </div>
            </div>
            <div class="header-right">
                <div class="dropdown">
                    <button id="menu-btn" class="btn btn-secondary" title="Menu">
                        ‚ò∞
                    </button>
                    <div id="menu-dropdown" class="dropdown-menu">
                        <button id="projects-btn" class="dropdown-item">
                            üìÅ Projects
                        </button>
                        <button id="new-project-btn" class="dropdown-item">
                            ‚ú® New Project
                        </button>
                        <div class="dropdown-divider"></div>
                        <button id="import-btn" class="dropdown-item">
                            üìÇ Import File
                        </button>
                        <button id="export-btn" class="dropdown-item">
                            üíæ Export File
                        </button>
                    </div>
                </div>
                <button id="toggle-code-btn" class="btn btn-secondary" title="Toggle Code View">
                    üíª Code
                </button>
                <button id="save-project-btn" class="btn btn-primary">
                    üíæ Save Project
                </button>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="editor-main">
            <!-- Left Sidebar - Navigation -->
            <aside class="editor-sidebar">
                <nav class="editor-nav">
                    <button class="nav-tab active" data-tab="scenes">
                        üé¨ Scenes
                    </button>
                    <button class="nav-tab" data-tab="items">
                        üì¶ Items
                    </button>
                    <button class="nav-tab" data-tab="audio">
                        üîä Audio
                    </button>
                </nav>

                <!-- Scenes List -->
                <div class="tab-content active" id="scenes-list">
                    <div class="list-header">
                        <h3>Scenes</h3>
                        <button id="add-scene-btn" class="btn-icon" title="Add Scene">‚ûï</button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="scene-search" placeholder="Search scenes...">
                    </div>
                    <ul id="scenes-list-items" class="item-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>

                <!-- Items List -->
                <div class="tab-content" id="items-list">
                    <div class="list-header">
                        <h3>Items</h3>
                        <button id="add-item-btn" class="btn-icon" title="Add Item">‚ûï</button>
                    </div>
                    <div class="search-box">
                        <input type="text" id="item-search" placeholder="Search items...">
                    </div>
                    <div class="filter-group">
                        <label>Filter by type:</label>
                        <select id="item-type-filter">
                            <option value="">All Types</option>
                            <option value="item">Item</option>
                            <option value="target">Target</option>
                            <option value="link">Link</option>
                            <option value="decor">Decor</option>
                        </select>
                    </div>
                    <ul id="items-list-items" class="item-list">
                        <!-- Populated by JS -->
                    </ul>
                </div>

                <!-- Audio List -->
                <div class="tab-content" id="audio-list">
                    <div class="list-header">
                        <h3>Audio</h3>
                    </div>
                    <div class="audio-info">
                        <p style="font-size: 0.9em; color: var(--text-muted); padding: var(--spacing-md);">
                            Configure ambient music and sound effects for your game.
                        </p>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <main class="editor-content">
                <!-- Welcome Screen -->
                <div id="welcome-screen" class="welcome-screen active">
                    <div class="welcome-content">
                        <h2>Welcome to the Game Data Editor</h2>
                        <p>Get started by:</p>
                        <ul>
                            <li>üìÇ Importing your existing <code>gameData.js</code> file</li>
                            <li>üé¨ Creating a new scene</li>
                            <li>üì¶ Adding new items</li>
                        </ul>
                        <div class="welcome-actions">
                            <button id="welcome-import-btn" class="btn btn-primary btn-large">
                                üìÇ Import Existing Data
                            </button>
                            <button id="welcome-new-btn" class="btn btn-secondary btn-large">
                                ‚ú® Start Fresh
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Scene Editor -->
                <div id="scene-editor" class="editor-panel">
                    <div class="panel-header">
                        <h2 id="scene-editor-title">Edit Scene</h2>
                        <div class="panel-actions">
                            <button id="delete-scene-btn" class="btn btn-danger">üóëÔ∏è Delete</button>
                            <button id="duplicate-scene-btn" class="btn btn-secondary">üìã Duplicate</button>
                        </div>
                    </div>
                    <form id="scene-form" class="editor-form">
                        <!-- Scene form fields will be populated by JS -->
                    </form>
                </div>

                <!-- Item Editor -->
                <div id="item-editor" class="editor-panel">
                    <div class="panel-header">
                        <h2 id="item-editor-title">Edit Item</h2>
                        <div class="panel-actions">
                            <button id="delete-item-btn" class="btn btn-danger">üóëÔ∏è Delete</button>
                            <button id="duplicate-item-btn" class="btn btn-secondary">üìã Duplicate</button>
                        </div>
                    </div>
                    <form id="item-form" class="editor-form">
                        <!-- Item form fields will be populated by JS -->
                    </form>
                </div>

                <!-- Code Editor -->
                <div id="code-editor" class="editor-panel">
                    <div class="panel-header">
                        <h2>üíª Code Editor</h2>
                        <div class="panel-actions">
                            <button id="format-code-btn" class="btn btn-sm btn-secondary" title="Format Code">
                                üé® Format
                            </button>
                            <button id="revert-code-btn" class="btn btn-sm btn-secondary" title="Revert Changes">
                                ‚Ü©Ô∏è Revert
                            </button>
                            <button id="apply-code-btn" class="btn btn-sm btn-primary" title="Apply Changes">
                                ‚úì Apply Changes
                            </button>
                        </div>
                    </div>
                    <div id="code-status" class="code-status">
                        ‚úì Code is in sync with editor
                    </div>
                    <div id="code-error" class="code-error" style="display: none;">
                        <!-- Error messages -->
                    </div>
                    <div class="code-editor-container">
                        <div id="line-numbers" class="line-numbers"></div>
                        <textarea id="code-textarea" class="code-textarea" spellcheck="false"></textarea>
                    </div>
                </div>

                <!-- Audio Editor -->
                <div id="audio-editor" class="editor-panel">
                    <div class="panel-header">
                        <h2>üîä Audio Configuration</h2>
                    </div>
                    <form id="audio-form" class="editor-form">
                        <!-- Audio form fields will be populated by JS -->
                    </form>
                </div>
            </main>

            <!-- Right Sidebar - Preview/Settings -->
            <aside class="editor-preview">
                <nav class="preview-nav">
                    <button class="preview-tab active" data-preview-tab="preview">
                        üëÅÔ∏è Preview
                    </button>
                    <button class="preview-tab" data-preview-tab="settings">
                        ‚öôÔ∏è Settings
                    </button>
                    <button class="preview-tab" data-preview-tab="assets">
                        üñºÔ∏è Assets
                    </button>
                </nav>

                <!-- Preview Tab -->
                <div class="preview-tab-content active" id="preview-content">
                    <!-- Canvas for visual positioning -->
                    <div id="scene-canvas" class="scene-canvas">
                        <div class="canvas-info">
                            <p>Select a scene to preview</p>
                        </div>
                    </div>

                    <!-- Item Preview -->
                    <div id="item-preview" class="item-preview">
                        <div class="preview-info">
                            <p>Select an item to preview</p>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="preview-tab-content" id="settings-tab-content">
                    <div class="settings-tab-header">
                        <h3>Game Settings</h3>
                    </div>
                    <form id="settings-form" class="editor-form">
                        <!-- Settings form fields will be populated by JS -->
                    </form>
                </div>

                <!-- Assets Tab -->
                <div class="preview-tab-content" id="assets-tab-content">
                    <div class="assets-tab-header">
                        <h3>Project Assets</h3>
                        <button id="refresh-assets-btn" class="btn btn-secondary btn-sm">
                            üîÑ Refresh
                        </button>
                    </div>
                    <div id="assets-container" class="assets-container">
                        <p class="loading-message">Loading assets...</p>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Status Bar -->
        <footer class="editor-footer">
            <div class="status-left">
                <span id="status-message">Ready</span>
            </div>
            <div class="status-right">
                <span id="item-count">0 items</span>
                <span class="separator">|</span>
                <span id="scene-count">0 scenes</span>
            </div>
        </footer>
    </div>

    <!-- Hidden file input for import -->
    <input type="file" id="file-input" accept=".js" style="display: none;">

    <!-- Modal for confirmations and projects -->
    <div id="modal" class="modal-overlay" style="display: none;">
        <div class="modal" style="max-width: 700px;">
            <div class="modal-header">
                <h3 id="modal-title">Confirm</h3>
                <button id="modal-close" class="btn-icon" onclick="document.getElementById('modal').style.display='none'">‚úï</button>
            </div>
            <div class="modal-body" id="modal-body">
                <p id="modal-message"></p>
            </div>
            <div class="modal-footer" id="modal-actions">
                <button id="modal-cancel" class="btn btn-secondary" onclick="document.getElementById('modal').style.display='none'">Cancel</button>
                <button id="modal-confirm" class="btn btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Auto-save indicator -->
    <div id="autosave-indicator">‚úì Auto-saved</div>

    <!-- Scripts -->
    <script type="module" src="js/editor.js"></script>
</body>
</html>

