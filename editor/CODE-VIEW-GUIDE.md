# Code View Guide

The Game Data Editor now includes a **Code View** that lets you edit your game data directly as JavaScript code!

## üéØ Features

### Direct Code Editing
- Edit the entire gameData.js file as code
- Full JavaScript syntax (not just JSON)
- Line numbers for easy navigation
- Monospace font for better readability

### Sync with Visual Editor
- Changes in code view can be applied to visual editor
- Changes in visual editor update code view when you switch tabs
- Two-way synchronization

### Code Operations
- **Format** - Auto-format/prettify the code
- **Revert** - Undo all changes since last apply
- **Apply** - Apply code changes to the visual editor

### Validation
- Syntax checking when applying changes
- Error messages for invalid code
- Structure validation (ensures scenes and sceneItems exist)

## üìã How to Use

### Opening Code View

1. Click the **"üíª Code"** tab in the left sidebar
2. The code editor will open with your current game data

### Editing Code

1. Click in the textarea to start editing
2. Make your changes directly in the code
3. The status will show "‚ö†Ô∏è Unsaved changes"

### Applying Changes

1. Click **"‚úì Apply Changes"** button
2. The code will be parsed and validated
3. If valid, changes apply to the visual editor
4. If invalid, you'll see an error message

### Formatting Code

1. Click **"üé® Format"** button
2. Code will be auto-formatted with proper indentation
3. Makes code more readable

### Reverting Changes

1. Click **"‚Ü©Ô∏è Revert"** button
2. Confirms you want to revert
3. Restores code to last applied state

## üí° Use Cases

### Quick Edits
```javascript
// Change multiple item positions at once
position: [100, 200],  // Old
position: [150, 250],  // New
```

### Bulk Operations
```javascript
// Add the same property to multiple items
points: 10,  // Add this to several items
```

### Copy/Paste
```javascript
// Copy an entire scene or item
// Paste and modify the name/properties
```

### Advanced Editing
```javascript
// Edit complex nested structures
animation: {
    type: "sprite",
    fps: 8,
    frames: ["frame1.png", "frame2.png", "frame3.png"]
}
```

## ‚öôÔ∏è Code Structure

The code view shows the complete gameData.js file:

```javascript
/**
 * Game Data Configuration
 * Generated by Game Data Editor
 * 2024-01-01T12:00:00.000Z
 */

export const gameData = {
    title: "Adventure Game",
    version: "2.0.0",

    scenes: [
        {
            sceneName: "scene1",
            title: "The Beginning",
            // ... more properties
        }
    ],

    sceneItems: [
        {
            name: "key",
            longName: "Rusty Key",
            // ... more properties
        }
    ]
};
```

## üé® Formatting

The formatter will:
- Indent with 4 spaces
- Align properties nicely
- Add proper line breaks
- Sort properties logically
- Add helpful comments

## ‚ö†Ô∏è Important Notes

### Validation
- Code must be valid JavaScript
- Must have `scenes` and `sceneItems` arrays
- Property names must match schema
- Values must be correct types

### Unsaved Changes
- Status bar shows if you have unsaved changes
- Changes are NOT auto-applied
- Must click "Apply Changes" to update visual editor

### Error Handling
- Syntax errors will be caught
- Error messages show what went wrong
- Code won't apply if invalid
- Original data is preserved

## üîß Workflow Examples

### Scenario 1: Quick Position Adjustment

```javascript
// Visual editor: Click item, change X/Y fields
// Code view: Find item, change position array directly

position: [640, 360],  // Center of 1280x720 canvas
```

### Scenario 2: Duplicate Item with Variations

```javascript
// 1. Copy entire item object in code view
// 2. Paste below original
// 3. Change name and a few properties
// 4. Apply changes
// 5. Much faster than using visual editor!
```

### Scenario 3: Batch Property Updates

```javascript
// Add hover effect to all items at once
// Find each item, add:
style: {
    hoverEffect: "glow"
}
```

### Scenario 4: Complex Animation Setup

```javascript
// Easier to type complex animations in code
animation: {
    type: "sprite",
    fps: 12,
    frames: [
        "walk1.png", "walk2.png", "walk3.png", "walk4.png",
        "walk5.png", "walk6.png", "walk7.png", "walk8.png"
    ]
}
```

## üéØ Tips & Tricks

### 1. Use Format Often
- Click Format after making changes
- Keeps code readable
- Easier to spot errors

### 2. Test Small Changes First
- Make a small edit
- Apply and test
- Then make more changes

### 3. Copy Before Major Edits
- Copy entire code to clipboard
- Make changes
- If something breaks, paste back

### 4. Use Search (Ctrl+F)
- Find specific items quickly
- Search for property names
- Locate scenes by name

### 5. Line Numbers
- Reference specific lines
- Easy to navigate
- Scroll syncs with numbers

## üêõ Troubleshooting

### "Failed to parse code"
- Check for syntax errors (missing commas, brackets)
- Ensure quotes are matched
- Look for trailing commas in arrays

### "Invalid structure"
- Make sure `scenes` array exists
- Make sure `sceneItems` array exists
- Don't delete the main object structure

### Changes Not Applying
- Check status bar for errors
- Click "Apply Changes" button
- Look for error message below status

### Code Looks Messy
- Click "Format" button
- This will clean up indentation
- Makes errors easier to spot

## üöÄ Keyboard Shortcuts

While in code textarea:
- **Tab** - Insert 4 spaces
- **Ctrl+A** - Select all
- **Ctrl+C** - Copy
- **Ctrl+V** - Paste
- **Ctrl+Z** - Undo (in textarea only)
- **Ctrl+F** - Find (browser search)

## üìä Status Indicators

### Green (Success)
```
‚úì Code is in sync with editor
```
- No unsaved changes
- Code matches visual editor

### Orange (Warning)
```
‚ö†Ô∏è Unsaved changes - Click "Apply Changes" to update
```
- You've edited the code
- Changes not yet applied
- Click Apply to update

### Red (Error)
```
Error: Failed to parse code: Unexpected token...
```
- Syntax error in code
- Fix the error and try again
- Code not applied

## üéÆ Best Practices

1. **Start with Visual Editor** - Build basic structure
2. **Switch to Code** - For bulk edits and fine-tuning
3. **Format Regularly** - Keep code clean
4. **Apply Often** - Don't make too many changes at once
5. **Test After Apply** - Check visual editor after applying
6. **Save Project** - Don't forget to save after code changes!

## üîÑ Sync Behavior

### Visual ‚Üí Code
- Switch to Code tab
- Code automatically updates from visual editor
- Shows current state

### Code ‚Üí Visual
- Edit code
- Click "Apply Changes"
- Visual editor updates
- Lists refresh automatically

## üíæ Integration with Projects

- Code changes are part of the project
- Apply changes, then save project
- Auto-save works after applying code changes
- Export includes code changes

---

**Happy coding!** üíª‚ú®

